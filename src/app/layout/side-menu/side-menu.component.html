<div class="pr-menu">
  <div class="search-wrapper">
    <fa-icon [icon]="icons.faSearch"></fa-icon>
    <input type="text" class="search" placeholder="Ara">
  </div>

  <tree-root #tree [nodes]="nodes" [options]="options" (moveNode)="onNodeMove($event)">
    <ng-template #treeNodeTemplate let-node let-index="index">
      <div class="cntx" [contextMenu]="basicMenu" [contextMenuSubject]="node">

        <ng-container *ngIf="node.data.subjectType === 0; else folder">
          <span class="domain-logo">
            <img *ngIf="index % 5 === 0"
              src="https://cdn4.iconfinder.com/data/icons/social-messaging-ui-color-shapes-2-free/128/social-twitter-circle-128.png"
              alt="">
            <img *ngIf="index % 5 === 1"
              src="https://cdn2.iconfinder.com/data/icons/social-messaging-ui-color-shapes-2-free/128/social-whatsapp-circle-512.png"
              alt="">
            <img *ngIf="index % 5 === 2"
              src="https://cdn4.iconfinder.com/data/icons/social-messaging-ui-color-shapes-2-free/128/social-instagram-new-circle-512.png"
              alt="">
            <img *ngIf="index % 5 === 3"
              src="https://cdn4.iconfinder.com/data/icons/social-messaging-ui-color-shapes-2-free/128/social-reddit-circle-256.png"
              alt="">
            <img *ngIf="index % 5 === 4"
              src="https://cdn4.iconfinder.com/data/icons/social-messaging-ui-color-shapes-2-free/128/social-youtube-square1-256.png"
              alt="">

            <!-- <i class="fas fa-charging-station"></i> -->
          </span>
          <span>{{ node.data.name | titlecase}}</span>
          <span class="expander" (click)="toggleExpanded(node)" style="float: right; color: gray;">
            <i class="fas fa-chevron-down" *ngIf="!node.isCollapsed"></i>
            <i class="fas fa-chevron-right" *ngIf="node.isCollapsed"></i>

          </span>
        </ng-container>
        <ng-template #folder>
          <span>{{ node.data.name | titlecase}}</span>
        </ng-template>

      </div>
    </ng-template>
  </tree-root>
</div>

<context-menu>
  <ng-template contextMenuItem let-item (execute)="showMessage($event)">
    <span class="context-item">
      {{item.data.name}}
    </span>
  </ng-template>
  <ng-template contextMenuItem divider="true"></ng-template>

  <ng-template contextMenuItem [subMenu]="addMenu">
    <span class="context-item">
      Add
    </span>
  </ng-template>

  <context-menu #addMenu>
    <ng-template contextMenuItem (execute)="showDialog($event)">
      <span class="context-item">
        Project
      </span>
    </ng-template>
    <ng-template contextMenuItem (execute)="showMessage('Hola, ' + $event.item.name)">
      <span class="context-item">
        Folder
      </span>
    </ng-template>
  </context-menu>

  <ng-template contextMenuItem divider="true"></ng-template>
  <ng-template contextMenuItem let-item (execute)="showMessage($event)">
    <span class="context-item">
      Rename
    </span>
  </ng-template>
  <ng-template contextMenuItem divider="true"></ng-template>
  <ng-template contextMenuItem let-item (execute)="showMessage($event)">
    <span class="context-item">
      Duplicate
    </span>
  </ng-template>
  <ng-template contextMenuItem divider="true"></ng-template>
  <ng-template contextMenuItem let-item (execute)="showMessage($event)">
    <span class="context-item">
      Delete
    </span>
  </ng-template>

</context-menu>
<!-- <ng-template contextMenuItem passive="true">
    Input something: <input type="text">
  </ng-template> -->

<form *ngIf="addFolderForm" [formGroup]="addFolderForm" (ngSubmit)="onAddFolderFormSubmit(addFolderForm.value)">

  <p-dialog header="Create Project" [(visible)]="display" [modal]="true" [responsive]="true"
    [contentStyle]="{'overflow':'visible'}" [style]="{width: '500px', minWidth: '200px'}" [minY]="70"
    [maximizable]="true" [baseZIndex]="10000">
    <div class="ui-g ui-fluid">
      <div class="ui-g-12" style="margin-top: 10px;">
        <span>Location</span>
        <p-dropdown [options]="cars" formControlName="parentId" filter="true">
          <ng-template let-item pTemplate="selectedItem">
            <img src="https://www.primefaces.org/primeng/assets/showcase/images/demo/car/{{item.label}}.png"
              style="width:16px;vertical-align:middle" />
            <span style="vertical-align:middle; margin-left: .5em">{{item.label}}</span>
          </ng-template>
          <ng-template let-car pTemplate="item">
            <div class="ui-helper-clearfix" style="position: relative;height: 25px;">
              <img src="https://www.primefaces.org/primeng/assets/showcase/images/demo/car/{{car.label}}.png"
                style="width:24px;position:absolute;top:1px;left:5px" />
              <div style="font-size:14px;float:right;margin-top:4px">{{car.label}}</div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>
      <div class="ui-g-12 ui-md-12">
        <p>The story begins as Don Vito Corleone, the head of a New York Mafia family, oversees his daughter's wedding.
          His beloved son Michael has just come home from the war, but does not intend to become part of his father's
          business..
        </p>
      </div>

      <div class="ui-g-12 ">
        <p-radioButton formControlName="subjectType" name="group2" value="2" label="Project" inputId="preopt1">
        </p-radioButton>
      </div>
      <div class="ui-g-12">
        <p-radioButton formControlName="subjectType" name="group2" value="1" label="Folder" inputId="preopt2">
        </p-radioButton>
      </div>

      <div class="ui-g-12" style="margin-top: 10px;">
        <span class="ui-float-label">
          <input id="float-input" formControlName="name" type="text" size="30" pInputText>
          <label for="float-input">Name</label>
        </span>
      </div>
      
      <div class="ui-g-12 ui-md-6" *ngIf="subjectType.value === '2'">
        <span>Start Date</span>
        <p-calendar formControlName="startDate" [showIcon]="true" [monthNavigator]="true" [yearNavigator]="true"
          yearRange="2000:2030">
        </p-calendar>
      </div>

      <div class="ui-g-12 ui-md-6" *ngIf="subjectType.value === '2'">
        <span>Due Date</span>
        <p-calendar formControlName="dueDate" [showIcon]="true" [monthNavigator]="true" [yearNavigator]="true"
          yearRange="2000:2030">
        </p-calendar>
      </div>

      <div class="ui-g-12 ui-md-12" >
        <p-multiSelect [options]="cars" formControlName="sharings" [panelStyle]="{}">
          <ng-template let-value pTemplate="selectedItems">
            <div *ngFor="let val of value" class="ui-multiselected-item-token ui-corner-all">
              <img src="https://www.primefaces.org/primeng/assets/showcase/images/demo/car/{{val}}.png"
                style="width:20px;vertical-align:middle;margin-right:.5em" />
              <span>{{val}}</span>
            </div>
            <span *ngIf="!value || value.length === 0" class="ui-multiselected-empty-token ui-corner-all">Chose Who Can
              Accesses To This Folder</span>
          </ng-template>
          <ng-template let-car pTemplate="item">
            <img src="https://www.primefaces.org/primeng/assets/showcase/images/demo/car/{{car.label}}.png"
              style="width:24px;display:inline-block;vertical-align:middle" />
            <div style="font-size:14px;float:right;margin-top:4px">{{car.label}}</div>
          </ng-template>
        </p-multiSelect>
      </div>

    </div>
    <p-footer>
      <button type="submit" pButton icon="pi pi-check" label="Save"></button>
      <button type="button" pButton icon="pi pi-times" (click)="tst()" label="Cancel"
        class="ui-button-secondary"></button>
    </p-footer>
  </p-dialog>
</form>

<!-- <div class="sidebar">
  <div class="menu-actions" >
    <div class="menu-action"  [routerLink]="['/pages/schedules']" routerLinkActive="active">
      <div class="logo">
        <fa-icon [icon]="icons.faColumns"></fa-icon>
      </div>
      <div class="content">
        Dashboard
      </div>
    </div>

    <div class="menu-action" [routerLink]="['/pages/faculties']"
      routerLinkActive="active">
      <div class="logo">
        <fa-icon [icon]="icons.faTasks"></fa-icon>
      </div>
      <div class="content">
        Projects
      </div>
    </div>

    <div  class="menu-action" [routerLink]="['/pages/departments']"
      routerLinkActive="active">
      <div class="logo">
        <fa-icon [icon]="icons.faCalendarAlt"></fa-icon>
      </div>
      <div class="content">
        Calendar
      </div>
    </div>
    <div class="menu-action"  [routerLink]="['/pages/lessons']" routerLinkActive="active">
      <div class="logo">
        <fa-icon [icon]="icons.faUndoAlt"></fa-icon>
      </div>
      <a class="content">
        History
      </a>
    </div>
    <div class="menu-action"
      [routerLink]="['/pages/constraints']" routerLinkActive="active">
      <div class="logo">
        <fa-icon [icon]="icons.faUsers"></fa-icon>
      </div>
      <div class="content">
        Negotiation
      </div>
    </div>

    <div class="menu-action"  [routerLink]="['/pages/instructors']" routerLinkActive="active">
      <div class="logo">
        <fa-icon [icon]="icons.faQuestion"></fa-icon>
      </div>
      <a class="content">
        Q/A
      </a>
    </div>
    <div class="menu-action" [routerLink]="['/pages/locations']"
      routerLinkActive="active">
      <div class="logo">
        <fa-icon [icon]="icons.faExclamationTriangle"></fa-icon>
      </div>
      <a class="content">
        Issues
      </a>
    </div>


  </div>
</div> -->